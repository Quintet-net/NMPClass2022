<?xml version='1.0' encoding='utf-8' standalone='yes'?>
<?xml-stylesheet href="./_c74_ref.xsl" type="text/xsl"?>
<!--
Part of the Fluid Corpus Manipulation Project (http://www.flucoma.org/)
Copyright 2017-2019 University of Huddersfield.
Licensed under the BSD-3 License.
See license.md file in the project root for full license information.
This project has received funding from the European Research Council (ERC)
under the European Union’s Horizon 2020 research and innovation programme
(grant agreement No 725899).
-->
<!-- DO NOT EDIT THIS FILE ... YOU WILL LOSE YOUR WORK -->
<c74object name='fluid.bufampslice~' category='FluidCorpusManuipulation'>
	<digest>Amplitude-based Detrending Slicer for Buffers</digest>
	<description><div class="document">
<p>This class implements an amplitude-based slicer,with various customisable options and conditions to detect relative amplitude changes as onsets.</p>
</div>
</description>
  <discussion>
      <h4><openfilelink filename="Fluid Corpus Manipulation Toolkit.maxpat">Open the Overview Patch</openfilelink></h4>
    <div class="document">
<p>FluidBufAmpSlice is based on two envelop followers on a highpassed version of the signal: one slow that gives the trend, and one fast. Each have features that will interact. The example code below is unfolding the various possibilites in order of complexity.</p>
<p>The process will return a buffer which contains indices (in sample) of estimated starting points of different slices.</p>
</div>


		fluid.bufampslice~ is part of the Fluid Decomposition Toolkit of the FluCoMa project. For more explanations, learning material, and discussions on its musicianly uses, visit <a href="http://www.flucoma.org/">flucoma.org</a>.

  </discussion>
	<!--METADATA-->
	<metadatalist>
		<metadata name='author'>FluCoMa</metadata>
		<metadata name='tag'>Fluid Decomposition</metadata>
		<metadata name='tag'>corpus</metadata>
	</metadatalist>
	<!--ARGUMENTS-->
	<objarglist><!-- <objarg name='function' optional='1' type='number'>
			<digest>Initial easing function to use</digest>
			<description>Initial easing function to use. </description>
		</objarg>-->
	</objarglist>
	<!--MESSAGES-->
  <methodlist><method name="bang">
     <arglist />
     <digest>
       Trigger processing
     </digest>
     <description>
       A bang will commence processing on object given its current settings, unless it is already busy. In that case, the behaviour depends on the value of the <m>queue</m> attribute.
     </description>
   </method>
   <method name="cancel">
     <arglist />
     <digest>
       Cancel non-blocking processing
     </digest>
     <description>
       When processing in non-blocking mode, this will cancel the job underway, without updating destination buffers.
     </description>
   </method><method name="reset">
      <arglist />
      <digest>
        Return the object to its original state
      </digest>
      <description>
        Calling <m>reset</m> will change parameter values back to those the object was <i>created</i> with, i.e. any attribute values set in the box will be retained
      </description>
    </method></methodlist>
	<!--ATTRIBUTES-->
	<attributelist><attribute name='blocking' get='1' set='1' type='int' size='1'>
        <digest>
          Blocking Mode
        </digest>
        <description>
          <div class="document">
<p>Set the threading mode for the object</p>
</div>

          
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='1' /><attribute name="enumvals" get="1" set="1" type="atom" size='3'>
            <enumlist><enum name='Non-Blocking'>
                <description>
                  <div class="document">
<p>Processing runs in a worker thread</p>
</div>

                </description>
              </enum><enum name='Blocking (Low Priority)'>
                <description>
                  <div class="document">
<p>Processing runs in the main application thread</p>
</div>

                </description>
              </enum><enum name='Blocking (High Priority)'>
                <description>
                  <div class="document">
<p>(Max only) Processing runs in the scheduler thread</p>
</div>

                </description>
              </enum></enumlist>
          </attribute></attributelist></attribute><attribute name='fastrampdown' get='1' set='1' type='int' size='1'>
        <digest>
          Fast Envelope Ramp Down Length
        </digest>
        <description>
          <div class="document">
<p>The number of samples the relative envelope follower will take to reach the next value when falling. Typically, this will be faster than slowRampDown.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 1</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='1' /></attributelist></attribute><attribute name='fastrampup' get='1' set='1' type='int' size='1'>
        <digest>
          Fast Envelope Ramp Up Length
        </digest>
        <description>
          <div class="document">
<p>The number of samples the relative envelope follower will take to reach the next value when raising. Typically, this will be faster than slowRampUp.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 1</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='1' /></attributelist></attribute><attribute name='floor' get='1' set='1' type='float64' size='1'>
        <digest>
          Floor value (dB)
        </digest>
        <description>
          <div class="document">
<blockquote>
The level in dB the slowRamp needs to be above to consider a detected difference valid, allowing to ignore the slices in the noise floor.</blockquote>
</div>

          <h5>Constraints</h5><ul><li>Minimum: -144</li><li>Maximum: 144</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='-145.0' /></attributelist></attribute><attribute name='highpassfreq' get='1' set='1' type='float64' size='1'>
        <digest>
          High-Pass Filter Cutoff
        </digest>
        <description>
          <div class="document">
<p>The frequency of the fourth-order Linkwitz–Riley high-pass filter (<a class="reference external" href="https://en.wikipedia.org/wiki/Linkwitz%E2%80%93Riley_filter">https://en.wikipedia.org/wiki/Linkwitz%E2%80%93Riley_filter</a>). This is done first on the signal to minimise low frequency intermodulation with very fast ramp lengths. A frequency of 0 bypasses the filter.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 0</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='85.0' /></attributelist></attribute><attribute name='indices' get='1' set='1' type='symbol' size='1'>
        <digest>
          Indices Buffer
        </digest>
        <description>
          <div class="document">
<p>The index of the buffer where the indices (in sample) of the estimated starting points of slices will be written. The first and last points are always the boundary points of the analysis.</p>
</div>

          
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='None' /></attributelist></attribute><attribute name='minslicelength' get='1' set='1' type='int' size='1'>
        <digest>
          Minimum Length of Slice
        </digest>
        <description>
          <div class="document">
<p>The length in samples that the Slice will stay ON. Changes of states during that period will be ignored.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 0</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='2' /></attributelist></attribute><attribute name='numchans' get='1' set='1' type='int' size='1'>
        <digest>
          Number of Channels
        </digest>
        <description>
          <div class="document">
<p>For multichannel sources, how many channel should be summed.</p>
</div>

          
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='-1' /></attributelist></attribute><attribute name='numframes' get='1' set='1' type='int' size='1'>
        <digest>
          Number of Frames
        </digest>
        <description>
          <div class="document">
<p>How many frames should be processed.</p>
</div>

          
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='-1' /></attributelist></attribute><attribute name='offthreshold' get='1' set='1' type='float64' size='1'>
        <digest>
          Off Threshold (dB)
        </digest>
        <description>
          <div class="document">
<p>The threshold in dB of the relative envelope follower to reset, aka to allow the differential envelop to trigger again.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: -144</li><li>Maximum: 144</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='-144.0' /></attributelist></attribute><attribute name='onthreshold' get='1' set='1' type='float64' size='1'>
        <digest>
          On Threshold (dB)
        </digest>
        <description>
          <div class="document">
<p>The threshold in dB of the relative envelope follower to trigger an onset, aka to go ON when in OFF state. It is computed on the difference between the two envelope followers.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: -144</li><li>Maximum: 144</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='144.0' /></attributelist></attribute><attribute name='queue' get='1' set='1' type='int' size='1'>
        <digest>
          Non-Blocking Queue Flag
        </digest>
        <description>
          <div class="document">
<p>In non-blocking mode enable jobs to be queued up if successive bangs are sent whilst the object is busy. With the queue disabled, successive bangs will produce a warning. When enabled, the object will processing successively, against the state of its parameters when each bang was sent</p>
</div>

          
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='0' /></attributelist></attribute><attribute name='slowrampdown' get='1' set='1' type='int' size='1'>
        <digest>
          Slow Envelope Ramp Down Length
        </digest>
        <description>
          <div class="document">
<p>The number of samples the absolute envelope follower will take to reach the next value when falling.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 1</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='100' /></attributelist></attribute><attribute name='slowrampup' get='1' set='1' type='int' size='1'>
        <digest>
          Slow Envelope Ramp Up Length
        </digest>
        <description>
          <div class="document">
<p>The number of samples the absolute envelope follower will take to reach the next value when raising.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 1</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='100' /></attributelist></attribute><attribute name='source' get='1' set='1' type='symbol' size='1'>
        <digest>
          Source Buffer
        </digest>
        <description>
          <div class="document">
<p>The index of the buffer to use as the source material to be sliced through novelty identification. The different channels of multichannel buffers will be summed.</p>
</div>

          
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='None' /></attributelist></attribute><attribute name='startchan' get='1' set='1' type='int' size='1'>
        <digest>
          Start Channel
        </digest>
        <description>
          <div class="document">
<p>For multichannel sources, which channel should be processed.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 0</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='0' /></attributelist></attribute><attribute name='startframe' get='1' set='1' type='int' size='1'>
        <digest>
          Source Offset
        </digest>
        <description>
          <div class="document">
<p>Where in the srcBuf should the slicing process start, in sample.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 0</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='0' /></attributelist></attribute><attribute name='warnings' get='1' set='1' type='int' size='1'>
        <digest>
          Warnings
        </digest>
        <description>
          <div class="document">
<p>Enable warnings to be issued whenever a parameter value is constrained (e.g. clipped)</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 0</li><li>Maximum: 1</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='0' /></attributelist></attribute></attributelist>
	<!--RELATED-->
	<seealsolist>
    
    <seealso name='fluid.ampslice~' />
    <seealso name='fluid.bufampgate~' />
    <seealso name='fluid.bufonsetslice~' />
    <seealso name='fluid.bufnoveltyslice~' />
    <seealso name='fluid.buftransientslice~' />
	</seealsolist>
</c74object>