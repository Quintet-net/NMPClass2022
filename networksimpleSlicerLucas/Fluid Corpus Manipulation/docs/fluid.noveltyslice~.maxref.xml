<?xml version='1.0' encoding='utf-8' standalone='yes'?>
<?xml-stylesheet href="./_c74_ref.xsl" type="text/xsl"?>
<!--
Part of the Fluid Corpus Manipulation Project (http://www.flucoma.org/)
Copyright 2017-2019 University of Huddersfield.
Licensed under the BSD-3 License.
See license.md file in the project root for full license information.
This project has received funding from the European Research Council (ERC)
under the European Union’s Horizon 2020 research and innovation programme
(grant agreement No 725899).
-->
<!-- DO NOT EDIT THIS FILE ... YOU WILL LOSE YOUR WORK -->
<c74object name='fluid.noveltyslice~' category='FluidCorpusManuipulation'>
	<digest>Real-Time Novelty-Based Slicer</digest>
	<description><div class="document">
<p>A real-time slicer using an algorithm assessing novelty in the signal to estimate the slicing points.</p>
</div>
</description>
  <discussion>
      <h4><openfilelink filename="Fluid Corpus Manipulation Toolkit.maxpat">Open the Overview Patch</openfilelink></h4>
    <div class="document">
<p>A novelty curve is derived from running a kernel across the diagonal of the similarity matrix, and looking for peak of changes. It implements the algorithm published in 'Automatic Audio Segmentation Using a Measure of Audio Novelty' by J Foote.</p>
<p>The process will return an audio steam with sample-long impulses at estimated starting points of the different slices.</p>
</div>


		fluid.noveltyslice~ is part of the Fluid Decomposition Toolkit of the FluCoMa project. For more explanations, learning material, and discussions on its musicianly uses, visit <a href="http://www.flucoma.org/">flucoma.org</a>.

  </discussion>
	<!--METADATA-->
	<metadatalist>
		<metadata name='author'>FluCoMa</metadata>
		<metadata name='tag'>Fluid Decomposition</metadata>
		<metadata name='tag'>corpus</metadata>
	</metadatalist>
	<!--ARGUMENTS-->
	<objarglist><objarg name='maxfftsize' optional='1' type='number'>
        <digest>
          Maxiumm FFT Size
        </digest>
        <description>
          <div class="document">
<p>How large can the FFT be, by allocating memory at instantiation time. This cannot be modulated.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 4</li><li>Snaps to powers of two</li></ul>
        </description><attributelist>
          <attribute name="default" get="1" set="1" type="int" size='1' value='16384' />
        </attributelist></objarg><objarg name='maxkernelsize' optional='1' type='number'>
        <digest>
          Maxiumm Kernel Size
        </digest>
        <description>
          <div class="document">
<p>This cannot be modulated.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 3</li><li>Snaps to odd numbers</li></ul>
        </description><attributelist>
          <attribute name="default" get="1" set="1" type="int" size='1' value='101' />
        </attributelist></objarg><objarg name='maxfiltersize' optional='1' type='number'>
        <digest>
          Maxiumm Filter Size
        </digest>
        <description>
          <div class="document">
<p>This cannot be modulated.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 1</li></ul>
        </description><attributelist>
          <attribute name="default" get="1" set="1" type="int" size='1' value='100' />
        </attributelist></objarg><!-- <objarg name='function' optional='1' type='number'>
			<digest>Initial easing function to use</digest>
			<description>Initial easing function to use. </description>
		</objarg>-->
	</objarglist>
	<!--MESSAGES-->
  <methodlist><method name="reset">
      <arglist />
      <digest>
        Return the object to its original state
      </digest>
      <description>
        Calling <m>reset</m> will change parameter values back to those the object was <i>created</i> with, i.e. any attribute values set in the box will be retained
      </description>
    </method></methodlist>
	<!--ATTRIBUTES-->
	<attributelist><attribute name='feature' get='1' set='1' type='int' size='1'>
        <digest>
          Feature
        </digest>
        <description>
          <div class="document">
<p>The feature on which novelty is computed.</p>
</div>

          
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='0' /><attribute name="enumvals" get="1" set="1" type="atom" size='4'>
            <enumlist><enum name='Spectrum'>
                <description>
                  <div class="document">
<p>Spectrum – The magnitude of the full spectrum.</p>
</div>

                </description>
              </enum><enum name='MFCC'>
                <description>
                  <div class="document">
<p>MFCC – 13 Mel-Frequency Cepstrum Coefficients.</p>
</div>

                </description>
              </enum><enum name='Pitch'>
                <description>
                  <div class="document">
<p>Pitch – The pitch and its confidence.</p>
</div>

                </description>
              </enum><enum name='Loudness'>
                <description>
                  <div class="document">
<p>Loudness – The TruePeak and Loudness.</p>
</div>

                </description>
              </enum></enumlist>
          </attribute></attributelist></attribute><attribute name='fftsettings' get='1' set='1' type='int' size='3'>
        <digest>
          FFT Settings
        </digest>
        <description>
          <div class="document">
<p>FFT settings consist of three numbers representing the window size, hop size and FFT size in samples:</p>
<p>The hop size and fft size can both be set to -1 (and are by default), with slightly different meanings:</p>
<ul class="simple">
<li>For the hop size, -1 = <tt class="docutils literal">windowSize/2</tt></li>
<li>For the FFT size, -1 = <tt class="docutils literal">windowSize</tt> snapped to the nearest equal / greater power of 2 (e.g. <tt class="docutils literal">windowSize 1024</tt> =&gt; <tt class="docutils literal">fftSize 1024</tt>, but <tt class="docutils literal">windowsSize 1000</tt> also =&gt; <tt class="docutils literal">fftSize 1024</tt>)</li>
</ul>
</div>

          <h5>Constraints</h5><ul><li> FFTSize, if != -1, will set to the next greatest power of two &gt; 4</li><li>The maximum manual FFT size is limited to the value of the <at>maxfftsize</at> initialization argument</li><li>if FFT size != -1, then window size is clipped at FFT size</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='3' value='[[&#39;winSize&#39;, 1024], [&#39;hopSize&#39;, -1], [&#39;fftSize&#39;, -1]]' /></attributelist></attribute><attribute name='filtersize' get='1' set='1' type='int' size='1'>
        <digest>
          Smoothing Filter Size
        </digest>
        <description>
          <div class="document">
<p>The size of a smoothing filter that is applied on the novelty curve. A larger filter filter size allows for cleaner cuts on very sharp changes.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 1</li><li>Maximum: <at>maxfiltersize</at></li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='1' /></attributelist></attribute><attribute name='kernelsize' get='1' set='1' type='int' size='1'>
        <digest>
          KernelSize
        </digest>
        <description>
          <div class="document">
<p>The granularity of the window in which the algorithm looks for change, in samples. A small number will be sensitive to short term changes, and a large number should look for long term changes.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 3</li><li>Maximum: <at>maxkernelsize</at></li><li>Snaps to odd numbers</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='3' /></attributelist></attribute><attribute name='minslicelength' get='1' set='1' type='int' size='1'>
        <digest>
          Minimum Length of Slice
        </digest>
        <description>
          <div class="document">
<p>The minimum duration of a slice in number of hopSize.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 0</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='2' /></attributelist></attribute><attribute name='threshold' get='1' set='1' type='float64' size='1'>
        <digest>
          Threshold
        </digest>
        <description>
          <div class="document">
<p>The normalised threshold, between 0 an 1, on the novelty curve to consider it a segmentation point.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 0</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='0.5' /></attributelist></attribute><attribute name='warnings' get='1' set='1' type='int' size='1'>
        <digest>
          Warnings
        </digest>
        <description>
          <div class="document">
<p>Enable warnings to be issued whenever a parameter value is constrained (e.g. clipped)</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 0</li><li>Maximum: 1</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='0' /></attributelist></attribute></attributelist>
	<!--RELATED-->
	<seealsolist>
    
    <seealso name='fluid.bufnoveltyslice~' />
    <seealso name='fluid.onsetslice~' />
    <seealso name='fluid.ampslice~' />
    <seealso name='fluid.transientslice~' />
	</seealsolist>
</c74object>