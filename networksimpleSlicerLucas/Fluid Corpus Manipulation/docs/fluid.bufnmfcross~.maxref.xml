<?xml version='1.0' encoding='utf-8' standalone='yes'?>
<?xml-stylesheet href="./_c74_ref.xsl" type="text/xsl"?>
<!--
Part of the Fluid Corpus Manipulation Project (http://www.flucoma.org/)
Copyright 2017-2019 University of Huddersfield.
Licensed under the BSD-3 License.
See license.md file in the project root for full license information.
This project has received funding from the European Research Council (ERC)
under the European Union’s Horizon 2020 research and innovation programme
(grant agreement No 725899).
-->
<!-- DO NOT EDIT THIS FILE ... YOU WILL LOSE YOUR WORK -->
<c74object name='fluid.bufnmfcross~' category='FluidCorpusManuipulation'>
	<digest>Resynthesise a target sound based on a source sound</digest>
	<description><div class="document">
<p>Reconstructs the sound in the target buffer using components learned from the source buffer using an NMF decomposition</p>
</div>
</description>
  <discussion>
      <h4><openfilelink filename="Fluid Corpus Manipulation Toolkit.maxpat">Open the Overview Patch</openfilelink></h4>
    <div class="document">
<p>The process works by attempting to reconstruct compoentns of the <cite>target</cite> sound using the timbre of the <cite>source</cite> sound, learned through a Nonnegative Matrix Factorisation. The result is a hybrid whose character depends on how well the target can be represnted by the source's spectral frames.</p>
<p>In contrast to <o>fluid.bufnmf~</o>, the size and content of the bases dictionary are fixed in this application to be the spectrogram of the <cite>source</cite>. Each spectral frame of <cite>source</cite> is a template: be aware that NMF is O(N^2) in the number of templates, so longer <cite>source</cite> buffers will take dramatically longer to process.</p>
<p>See Driedger, J., Prätzlich, T., &amp; Müller, M. (2015). Let it Bee-Towards NMF-Inspired Audio Mosaicing. ISMIR, 350–356. <a class="reference external" href="http://ismir2015.uma.es/articles/13_Paper.pdf">http://ismir2015.uma.es/articles/13_Paper.pdf</a></p>
</div>


		fluid.bufnmfcross~ is part of the Fluid Decomposition Toolkit of the FluCoMa project. For more explanations, learning material, and discussions on its musicianly uses, visit <a href="http://www.flucoma.org/">flucoma.org</a>.

  </discussion>
	<!--METADATA-->
	<metadatalist>
		<metadata name='author'>FluCoMa</metadata>
		<metadata name='tag'>Fluid Decomposition</metadata>
		<metadata name='tag'>corpus</metadata>
	</metadatalist>
	<!--ARGUMENTS-->
	<objarglist><!-- <objarg name='function' optional='1' type='number'>
			<digest>Initial easing function to use</digest>
			<description>Initial easing function to use. </description>
		</objarg>-->
	</objarglist>
	<!--MESSAGES-->
  <methodlist><method name="bang">
     <arglist />
     <digest>
       Trigger processing
     </digest>
     <description>
       A bang will commence processing on object given its current settings, unless it is already busy. In that case, the behaviour depends on the value of the <m>queue</m> attribute.
     </description>
   </method>
   <method name="cancel">
     <arglist />
     <digest>
       Cancel non-blocking processing
     </digest>
     <description>
       When processing in non-blocking mode, this will cancel the job underway, without updating destination buffers.
     </description>
   </method><method name="reset">
      <arglist />
      <digest>
        Return the object to its original state
      </digest>
      <description>
        Calling <m>reset</m> will change parameter values back to those the object was <i>created</i> with, i.e. any attribute values set in the box will be retained
      </description>
    </method></methodlist>
	<!--ATTRIBUTES-->
	<attributelist><attribute name='blocking' get='1' set='1' type='int' size='1'>
        <digest>
          Blocking Mode
        </digest>
        <description>
          <div class="document">
<p>Set the threading mode for the object</p>
</div>

          
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='1' /><attribute name="enumvals" get="1" set="1" type="atom" size='3'>
            <enumlist><enum name='Non-Blocking'>
                <description>
                  <div class="document">
<p>Processing runs in a worker thread</p>
</div>

                </description>
              </enum><enum name='Blocking (Low Priority)'>
                <description>
                  <div class="document">
<p>Processing runs in the main application thread</p>
</div>

                </description>
              </enum><enum name='Blocking (High Priority)'>
                <description>
                  <div class="document">
<p>(Max only) Processing runs in the scheduler thread</p>
</div>

                </description>
              </enum></enumlist>
          </attribute></attributelist></attribute><attribute name='continuity' get='1' set='1' type='int' size='1'>
        <digest>
          Continuity
        </digest>
        <description>
          <div class="document">
<p>Promote the use of N successive source frames, giving greater continuity in the result. This can not be bigger than the sizes of the input buffers, but useful values tend to be much lower (in the tens).</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 1</li><li>Snaps to odd numbers</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='7' /></attributelist></attribute><attribute name='fftsettings' get='1' set='1' type='int' size='3'>
        <digest>
          FFT Settings
        </digest>
        <description>
          <div class="document">
<p>FFT settings consist of three numbers representing the window size, hop size and FFT size in samples:</p>
<p>The hop size and fft size can both be set to -1 (and are by default), with slightly different meanings:</p>
<ul class="simple">
<li>For the hop size, -1 = <tt class="docutils literal">windowSize/2</tt></li>
<li>For the FFT size, -1 = <tt class="docutils literal">windowSize</tt> snapped to the nearest equal / greater power of 2 (e.g. <tt class="docutils literal">windowSize 1024</tt> =&gt; <tt class="docutils literal">fftSize 1024</tt>, but <tt class="docutils literal">windowsSize 1000</tt> also =&gt; <tt class="docutils literal">fftSize 1024</tt>)</li>
</ul>
</div>

          <h5>Constraints</h5><ul><li> FFTSize, if != -1, will set to the next greatest power of two &gt; 4</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='3' value='[[&#39;winSize&#39;, 1024], [&#39;hopSize&#39;, -1], [&#39;fftSize&#39;, -1]]' /></attributelist></attribute><attribute name='iterations' get='1' set='1' type='int' size='1'>
        <digest>
          Number of Iterations
        </digest>
        <description>
          <div class="document">
<p>How many iterations of NMF to run</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 1</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='50' /></attributelist></attribute><attribute name='output' get='1' set='1' type='symbol' size='1'>
        <digest>
          Output Buffer
        </digest>
        <description>
          <div class="document">
<p>A buffer to contain the new sound</p>
</div>

          
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='None' /></attributelist></attribute><attribute name='polyphony' get='1' set='1' type='int' size='1'>
        <digest>
          Polyphony
        </digest>
        <description>
          <div class="document">
<p>Control the spectral density of the output sound by restricting the number of simultaneous templates that can be used. Units are spectral bins.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 1</li><li>Maximum: <m>(fftSize/2) + 1</m>(see <at>fftsettings</at>)</li><li>Snaps to odd numbers</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='10' /></attributelist></attribute><attribute name='queue' get='1' set='1' type='int' size='1'>
        <digest>
          Non-Blocking Queue Flag
        </digest>
        <description>
          <div class="document">
<p>In non-blocking mode enable jobs to be queued up if successive bangs are sent whilst the object is busy. With the queue disabled, successive bangs will produce a warning. When enabled, the object will processing successively, against the state of its parameters when each bang was sent</p>
</div>

          
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='0' /></attributelist></attribute><attribute name='source' get='1' set='1' type='symbol' size='1'>
        <digest>
          Source Buffer
        </digest>
        <description>
          <div class="document">
<p>A buffer whose content will supply the spectral bases used in the hybrid</p>
</div>

          
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='None' /></attributelist></attribute><attribute name='target' get='1' set='1' type='symbol' size='1'>
        <digest>
          Target Buffer
        </digest>
        <description>
          <div class="document">
<p>A buffer whose content will supply the temporal activations used in the hybrid</p>
</div>

          
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='None' /></attributelist></attribute><attribute name='timesparsity' get='1' set='1' type='int' size='1'>
        <digest>
          Time Sparsity
        </digest>
        <description>
          <div class="document">
<p>Control the repetition of source templates in the reconstruction by specifying a number of frames within which a template should not be re-used. Units are spectral frames.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 1</li><li>Snaps to odd numbers</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='7' /></attributelist></attribute><attribute name='warnings' get='1' set='1' type='int' size='1'>
        <digest>
          Warnings
        </digest>
        <description>
          <div class="document">
<p>Enable warnings to be issued whenever a parameter value is constrained (e.g. clipped)</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 0</li><li>Maximum: 1</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='0' /></attributelist></attribute></attributelist>
	<!--RELATED-->
	<seealsolist>
    
	</seealsolist>
</c74object>