<?xml version='1.0' encoding='utf-8' standalone='yes'?>
<?xml-stylesheet href="./_c74_ref.xsl" type="text/xsl"?>
<!--
Part of the Fluid Corpus Manipulation Project (http://www.flucoma.org/)
Copyright 2017-2019 University of Huddersfield.
Licensed under the BSD-3 License.
See license.md file in the project root for full license information.
This project has received funding from the European Research Council (ERC)
under the European Union’s Horizon 2020 research and innovation programme
(grant agreement No 725899).
-->
<!-- DO NOT EDIT THIS FILE ... YOU WILL LOSE YOUR WORK -->
<c74object name='fluid.bufpitch~' category='FluidCorpusManuipulation'>
	<digest>A Selection of Pitch Descriptors on a Buffer</digest>
	<description><div class="document">
<p>Implements three pitch descriptors, computed as frequency and the confidence in its value.</p>
</div>
</description>
  <discussion>
      <h4><openfilelink filename="Fluid Corpus Manipulation Toolkit.maxpat">Open the Overview Patch</openfilelink></h4>
    <div class="document">
<p>The process will return a multichannel buffer with two channels per input channel, one for pitch and one for the pitch tracking confidence. A pitch of 0 Hz is yield (or -999.0 when the unit is in MIDI note) when the algorithm cannot find a fundamental at all. Each sample represents a value, which is every hopSize. Its sampling rate is sourceSR / hopSize.</p>
</div>


		fluid.bufpitch~ is part of the Fluid Decomposition Toolkit of the FluCoMa project. For more explanations, learning material, and discussions on its musicianly uses, visit <a href="http://www.flucoma.org/">flucoma.org</a>.

  </discussion>
	<!--METADATA-->
	<metadatalist>
		<metadata name='author'>FluCoMa</metadata>
		<metadata name='tag'>Fluid Decomposition</metadata>
		<metadata name='tag'>corpus</metadata>
	</metadatalist>
	<!--ARGUMENTS-->
	<objarglist><objarg name='maxfftsize' optional='1' type='number'>
        <digest>
          Maxiumm FFT Size
        </digest>
        <description>
          <div class="document">
<p>How large can the FFT be, by allocating memory at instantiation time. This cannot be modulated.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 4</li><li>Snaps to powers of two</li></ul>
        </description><attributelist>
          <attribute name="default" get="1" set="1" type="int" size='1' value='16384' />
        </attributelist></objarg><!-- <objarg name='function' optional='1' type='number'>
			<digest>Initial easing function to use</digest>
			<description>Initial easing function to use. </description>
		</objarg>-->
	</objarglist>
	<!--MESSAGES-->
  <methodlist><method name="bang">
     <arglist />
     <digest>
       Trigger processing
     </digest>
     <description>
       A bang will commence processing on object given its current settings, unless it is already busy. In that case, the behaviour depends on the value of the <m>queue</m> attribute.
     </description>
   </method>
   <method name="cancel">
     <arglist />
     <digest>
       Cancel non-blocking processing
     </digest>
     <description>
       When processing in non-blocking mode, this will cancel the job underway, without updating destination buffers.
     </description>
   </method><method name="reset">
      <arglist />
      <digest>
        Return the object to its original state
      </digest>
      <description>
        Calling <m>reset</m> will change parameter values back to those the object was <i>created</i> with, i.e. any attribute values set in the box will be retained
      </description>
    </method></methodlist>
	<!--ATTRIBUTES-->
	<attributelist><attribute name='algorithm' get='1' set='1' type='int' size='1'>
        <digest>
          Algorithm
        </digest>
        <description>
          <div class="document">
<p>The algorithm to estimate the pitch. The options are:</p>
</div>

          
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='2' /><attribute name="enumvals" get="1" set="1" type="atom" size='3'>
            <enumlist><enum name='Cepstrum'>
                <description>
                  <div class="document">
<p>Cepstrum: Returns a pitch estimate as the location of the second highest peak in the Cepstrum of the signal (after DC).</p>
</div>

                </description>
              </enum><enum name='Harmonic Product Spectrum'>
                <description>
                  <div class="document">
<p>Harmonic Product Spectrum: Implements the Harmonic Product Spectrum algorithm for pitch detection . See e.g. A. Lerch, &quot;An Introduction to Audio Content Analysis: Applications in Signal Processing and Music Informatics.&quot; John Wiley &amp; Sons, 2012.https://onlinelibrary.wiley.com/doi/book/10.1002/9781118393550</p>
</div>

                </description>
              </enum><enum name='YinFFT'>
                <description>
                  <div class="document">
<p>YinFFT: Implements the frequency domain version of the YIN algorithm, as described in P. M. Brossier, &quot;Automatic Annotation of Musical Audio for Interactive Applications.” QMUL, London, UK, 2007. See also <a class="reference external" href="https://essentia.upf.edu/documentation/reference/streaming_PitchYinFFT.html">https://essentia.upf.edu/documentation/reference/streaming_PitchYinFFT.html</a></p>
</div>

                </description>
              </enum></enumlist>
          </attribute></attributelist></attribute><attribute name='blocking' get='1' set='1' type='int' size='1'>
        <digest>
          Blocking Mode
        </digest>
        <description>
          <div class="document">
<p>Set the threading mode for the object</p>
</div>

          
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='1' /><attribute name="enumvals" get="1" set="1" type="atom" size='3'>
            <enumlist><enum name='Non-Blocking'>
                <description>
                  <div class="document">
<p>Processing runs in a worker thread</p>
</div>

                </description>
              </enum><enum name='Blocking (Low Priority)'>
                <description>
                  <div class="document">
<p>Processing runs in the main application thread</p>
</div>

                </description>
              </enum><enum name='Blocking (High Priority)'>
                <description>
                  <div class="document">
<p>(Max only) Processing runs in the scheduler thread</p>
</div>

                </description>
              </enum></enumlist>
          </attribute></attributelist></attribute><attribute name='features' get='1' set='1' type='symbol' size='1'>
        <digest>
          Features Buffer
        </digest>
        <description>
          <div class="document">
<p>The destination buffer for the pitch descriptors.</p>
</div>

          
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='None' /></attributelist></attribute><attribute name='fftsettings' get='1' set='1' type='int' size='3'>
        <digest>
          FFT Settings
        </digest>
        <description>
          <div class="document">
<p>FFT settings consist of three numbers representing the window size, hop size and FFT size in samples:</p>
<p>The hop size and fft size can both be set to -1 (and are by default), with slightly different meanings:</p>
<ul class="simple">
<li>For the hop size, -1 = <tt class="docutils literal">windowSize/2</tt></li>
<li>For the FFT size, -1 = <tt class="docutils literal">windowSize</tt> snapped to the nearest equal / greater power of 2 (e.g. <tt class="docutils literal">windowSize 1024</tt> =&gt; <tt class="docutils literal">fftSize 1024</tt>, but <tt class="docutils literal">windowsSize 1000</tt> also =&gt; <tt class="docutils literal">fftSize 1024</tt>)</li>
</ul>
</div>

          <h5>Constraints</h5><ul><li> FFTSize, if != -1, will set to the next greatest power of two &gt; 4</li><li>The maximum manual FFT size is limited to the value of the <at>maxfftsize</at> initialization argument</li><li>if FFT size != -1, then window size is clipped at FFT size</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='3' value='[[&#39;winSize&#39;, 1024], [&#39;hopSize&#39;, -1], [&#39;fftSize&#39;, -1]]' /></attributelist></attribute><attribute name='maxfreq' get='1' set='1' type='float64' size='1'>
        <digest>
          High Frequency Bound
        </digest>
        <description>
          <div class="document">
<p>The maximum frequency that the algorithm will search for an estimated fundamental. This sets the highest value that will be generated.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: MAX(<at>minfreq</at>,1)</li><li>Maximum: 20000</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='10000.0' /></attributelist></attribute><attribute name='minfreq' get='1' set='1' type='float64' size='1'>
        <digest>
          Low Frequency Bound
        </digest>
        <description>
          <div class="document">
<p>The minimum frequency that the algorithm will search for an estimated fundamental. This sets the lowest value that will be generated.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 0</li><li>Maximum: MIN(<at>maxfreq</at>,10000)</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='20.0' /></attributelist></attribute><attribute name='numchans' get='1' set='1' type='int' size='1'>
        <digest>
          Number of Channels
        </digest>
        <description>
          <div class="document">
<p>For multichannel srcBuf, how many channel should be processed.</p>
</div>

          
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='-1' /></attributelist></attribute><attribute name='numframes' get='1' set='1' type='int' size='1'>
        <digest>
          Number of Frames
        </digest>
        <description>
          <div class="document">
<p>How many frames should be processed.</p>
</div>

          
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='-1' /></attributelist></attribute><attribute name='padding' get='1' set='1' type='int' size='1'>
        <digest>
          Added Padding
        </digest>
        <description>
          <div class="document">
<p>Controls the zero-padding added to either end of the source buffer or segment. Possible values are 0 (no padding), 1 (default, half the window size), or 2 (window size - hop size). Padding ensures that all input samples are completely analysed: with no padding, the first analysis window starts at time 0, and the samples at either end will be tapered by the STFT windowing function. Mode 1 has the effect of centering the first sample in the analysis window and ensuring that the very start and end of the segment are accounted for in the analysis. Mode 2 can be useful when the overlap factor (window size / hop size) is greater than 2, to ensure that the input samples at either end of the segment are covered by the same number of analysis frames as the rest of the analysed material.</p>
</div>

          
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='1' /></attributelist></attribute><attribute name='queue' get='1' set='1' type='int' size='1'>
        <digest>
          Non-Blocking Queue Flag
        </digest>
        <description>
          <div class="document">
<p>In non-blocking mode enable jobs to be queued up if successive bangs are sent whilst the object is busy. With the queue disabled, successive bangs will produce a warning. When enabled, the object will processing successively, against the state of its parameters when each bang was sent</p>
</div>

          
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='0' /></attributelist></attribute><attribute name='source' get='1' set='1' type='symbol' size='1'>
        <digest>
          Source Buffer
        </digest>
        <description>
          <div class="document">
<p>The index of the buffer to use as the source material to be pitch-tracked. The different channels of multichannel buffers will be processing sequentially.</p>
</div>

          
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='None' /></attributelist></attribute><attribute name='startchan' get='1' set='1' type='int' size='1'>
        <digest>
          Start Channel
        </digest>
        <description>
          <div class="document">
<p>For multichannel srcBuf, which channel should be processed first.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 0</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='0' /></attributelist></attribute><attribute name='startframe' get='1' set='1' type='int' size='1'>
        <digest>
          Source Offset
        </digest>
        <description>
          <div class="document">
<p>Where in the srcBuf should the process start, in sample.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 0</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='0' /></attributelist></attribute><attribute name='unit' get='1' set='1' type='int' size='1'>
        <digest>
          Frequency Unit
        </digest>
        <description>
          <div class="document">
<p>The unit of the estimated value. The default of 0 is in Hz. A value of 1 will convert to MIDI note values.</p>
</div>

          
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='0' /></attributelist></attribute><attribute name='warnings' get='1' set='1' type='int' size='1'>
        <digest>
          Warnings
        </digest>
        <description>
          <div class="document">
<p>Enable warnings to be issued whenever a parameter value is constrained (e.g. clipped)</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 0</li><li>Maximum: 1</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='0' /></attributelist></attribute></attributelist>
	<!--RELATED-->
	<seealsolist>
    
    <seealso name='fluid.pitch~' />
    <seealso name='fluid.bufloudness~' />
    <seealso name='fluid.bufmelbands~' />
    <seealso name='fluid.bufmfcc~' />
    <seealso name='fluid.bufspectralshape~' />
    <seealso name='fluid.bufstats~' />
	</seealsolist>
</c74object>