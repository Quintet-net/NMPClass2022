<?xml version='1.0' encoding='utf-8' standalone='yes'?>
<?xml-stylesheet href="./_c74_ref.xsl" type="text/xsl"?>
<!--
Part of the Fluid Corpus Manipulation Project (http://www.flucoma.org/)
Copyright 2017-2019 University of Huddersfield.
Licensed under the BSD-3 License.
See license.md file in the project root for full license information.
This project has received funding from the European Research Council (ERC)
under the European Unionâ€™s Horizon 2020 research and innovation programme
(grant agreement No 725899).
-->
<!-- DO NOT EDIT THIS FILE ... YOU WILL LOSE YOUR WORK -->
<c74object name='fluid.spectralshape~' category='FluidCorpusManuipulation'>
	<digest>Seven Spectral Shape Descriptors in Real-Time</digest>
	<description><div class="document">
<p>Seven of the  spectral shape descriptors, computed on a linear scale for both amplitude and frequency.</p>
</div>
</description>
  <discussion>
      <h4><openfilelink filename="Fluid Corpus Manipulation Toolkit.maxpat">Open the Overview Patch</openfilelink></h4>
    <div class="document">
<p>The descriptors are:</p>
<blockquote>
<ul>
<li><p class="first">the four first statistical moments (<a class="reference external" href="https://en.wikipedia.org/wiki/Moment_(mathematics)">https://en.wikipedia.org/wiki/Moment_(mathematics)</a>), more commonly known as:</p>
<blockquote>
<blockquote>
<ul class="simple">
<li>the spectral centroid (1) in Hertz. This is the point that splits the spectrum in 2 halves of equal energy. It is the weighted average of the magnitude spectrum.</li>
<li>the spectral spread (2) in Hertz. This is the standard deviation of the spectrum envelop, or the average of the distance to the centroid.</li>
<li>the normalised skewness (3) as ratio. This indicates how tilted is the spectral curve in relation to the middle of the spectral frame, i.e. half of the Nyquist frequency. If it is below the frequency of the magnitude spectrum, it is positive.</li>
</ul>
</blockquote>
<div class="system-message">
<p class="system-message-title">System Message: WARNING/2 (<tt class="docutils">&lt;string&gt;</tt>, line 8)</p>
<p>Block quote ends without a blank line; unexpected unindent.</p>
</div>
<ul class="simple">
<li><dl class="first docutils">
<dt>the normalised kurtosis (4) as ratio. This indicates how focused is the spectral curve. If it is peaky, it is high.</dt>
<dd><ul class="first last">
<li>the rolloff (5) in Hertz. This indicates the frequency under which 95% of the energy is included.</li>
<li>the flatness (6) in dB. This is the ratio of geometric mean of the magnitude, over the arithmetic mean of the magnitudes. It yields a very approximate measure on how noisy a signal is.</li>
<li>the crest (7) in dB. This is the ratio of the loudest magnitude over the RMS of the whole frame. A high number is an indication of a loud peak poking out from the overal spectral curve.</li>
</ul>
</dd>
</dl>
</li>
</ul>
</blockquote>
</li>
</ul>
</blockquote>
<p>The drawings in Peeters 2003 (<a class="reference external" href="http://recherche.ircam.fr/anasyn/peeters/ARTICLES/Peeters_2003_cuidadoaudiofeatures.pdf">http://recherche.ircam.fr/anasyn/peeters/ARTICLES/Peeters_2003_cuidadoaudiofeatures.pdf</a>) are useful, as are the commented examples below. For the mathematically-inclined reader, the tutorials and code offered here (<a class="reference external" href="https://www.audiocontentanalysis.org/">https://www.audiocontentanalysis.org/</a>) are interesting to further the understanding. For examples of the impact of computing the moments in power magnitudes, and/or in exponential frequency scale, please refer to the helpfile.</p>
<p>The process will return a multichannel control steam with the seven values, which will be repeated if no change happens within the algorithm, i.e. when the hopSize is larger than the signal vector size.</p>
</div>


		fluid.spectralshape~ is part of the Fluid Decomposition Toolkit of the FluCoMa project. For more explanations, learning material, and discussions on its musicianly uses, visit <a href="http://www.flucoma.org/">flucoma.org</a>.

  </discussion>
	<!--METADATA-->
	<metadatalist>
		<metadata name='author'>FluCoMa</metadata>
		<metadata name='tag'>Fluid Decomposition</metadata>
		<metadata name='tag'>corpus</metadata>
	</metadatalist>
	<!--ARGUMENTS-->
	<objarglist><objarg name='maxfftsize' optional='1' type='number'>
        <digest>
          Maxiumm FFT Size
        </digest>
        <description>
          <div class="document">
<p>How large can the FFT be, by allocating memory at instantiation time. This cannot be modulated.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 4</li><li>Snaps to powers of two</li></ul>
        </description><attributelist>
          <attribute name="default" get="1" set="1" type="int" size='1' value='16384' />
        </attributelist></objarg><!-- <objarg name='function' optional='1' type='number'>
			<digest>Initial easing function to use</digest>
			<description>Initial easing function to use. </description>
		</objarg>-->
	</objarglist>
	<!--MESSAGES-->
  <methodlist><method name="reset">
      <arglist />
      <digest>
        Return the object to its original state
      </digest>
      <description>
        Calling <m>reset</m> will change parameter values back to those the object was <i>created</i> with, i.e. any attribute values set in the box will be retained
      </description>
    </method></methodlist>
	<!--ATTRIBUTES-->
	<attributelist><attribute name='fftsettings' get='1' set='1' type='int' size='3'>
        <digest>
          FFT Settings
        </digest>
        <description>
          <div class="document">
<p>FFT settings consist of three numbers representing the window size, hop size and FFT size in samples:</p>
<p>The hop size and fft size can both be set to -1 (and are by default), with slightly different meanings:</p>
<ul class="simple">
<li>For the hop size, -1 = <tt class="docutils literal">windowSize/2</tt></li>
<li>For the FFT size, -1 = <tt class="docutils literal">windowSize</tt> snapped to the nearest equal / greater power of 2 (e.g. <tt class="docutils literal">windowSize 1024</tt> =&gt; <tt class="docutils literal">fftSize 1024</tt>, but <tt class="docutils literal">windowsSize 1000</tt> also =&gt; <tt class="docutils literal">fftSize 1024</tt>)</li>
</ul>
</div>

          <h5>Constraints</h5><ul><li> FFTSize, if != -1, will set to the next greatest power of two &gt; 4</li><li>The maximum manual FFT size is limited to the value of the <at>maxfftsize</at> initialization argument</li><li>if FFT size != -1, then window size is clipped at FFT size</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='3' value='[[&#39;winSize&#39;, 1024], [&#39;hopSize&#39;, -1], [&#39;fftSize&#39;, -1]]' /></attributelist></attribute><attribute name='maxfreq' get='1' set='1' type='float64' size='1'>
        <digest>
          High Frequency Bound
        </digest>
        <description>
          <div class="document">
<p>The maximum frequency that the algorithm will consider for computing the spectral shape. Frequencies above will be ignored. The default of -1 goes up to Nyquist.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: -1</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='-1.0' /></attributelist></attribute><attribute name='minfreq' get='1' set='1' type='float64' size='1'>
        <digest>
          Low Frequency Bound
        </digest>
        <description>
          <div class="document">
<p>The minimum frequency that the algorithm will consider for computing the spectral shape. Frequencies below will be ignored. The default of 0 goes down to DC when possible.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 0</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='0.0' /></attributelist></attribute><attribute name='power' get='1' set='1' type='int' size='1'>
        <digest>
          Use Power
        </digest>
        <description>
          <div class="document">
<p>This flag sets the scaling of the magnitudes in the moment calculation. It uses either its amplitude (0, by default) or its power (1).</p>
</div>

          
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='0' /></attributelist></attribute><attribute name='rolloffpercent' get='1' set='1' type='float64' size='1'>
        <digest>
          Rolloff Percent
        </digest>
        <description>
          <div class="document">
<p>This sets the percentage of the frame's energy that will be reported as the rolloff frequency. The default is 95%.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 0</li><li>Maximum: 100</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='95.0' /></attributelist></attribute><attribute name='unit' get='1' set='1' type='int' size='1'>
        <digest>
          Frequency Unit
        </digest>
        <description>
          <div class="document">
<p>The frequency unit for the spectral shapes to be computed upon, and outputted at. The default (0) is in Hertz and computes the moments on a linear spectrum. The alternative is in MIDI note numbers(1), which compute the moments on an exponential spectrum.</p>
</div>

          
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='0' /></attributelist></attribute><attribute name='warnings' get='1' set='1' type='int' size='1'>
        <digest>
          Warnings
        </digest>
        <description>
          <div class="document">
<p>Enable warnings to be issued whenever a parameter value is constrained (e.g. clipped)</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 0</li><li>Maximum: 1</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='0' /></attributelist></attribute></attributelist>
	<!--RELATED-->
	<seealsolist>
    
    <seealso name='fluid.bufspectralshape~' />
    <seealso name='fluid.pitch~' />
    <seealso name='fluid.melbands~' />
    <seealso name='fluid.loudness~' />
    <seealso name='fluid.mfcc~' />
	</seealsolist>
</c74object>