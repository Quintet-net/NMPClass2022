<?xml version='1.0' encoding='utf-8' standalone='yes'?>
<?xml-stylesheet href="./_c74_ref.xsl" type="text/xsl"?>
<!--
Part of the Fluid Corpus Manipulation Project (http://www.flucoma.org/)
Copyright 2017-2019 University of Huddersfield.
Licensed under the BSD-3 License.
See license.md file in the project root for full license information.
This project has received funding from the European Research Council (ERC)
under the European Union’s Horizon 2020 research and innovation programme
(grant agreement No 725899).
-->
<!-- DO NOT EDIT THIS FILE ... YOU WILL LOSE YOUR WORK -->
<c74object name='fluid.ampslice~' category='FluidCorpusManuipulation'>
	<digest>Amplitude-based Detrending Slicer</digest>
	<description><div class="document">
<p>This class implements an amplitude-based slicer, with various customisable options and conditions to detect relative amplitude changes as onsets.</p>
</div>
</description>
  <discussion>
      <h4><openfilelink filename="Fluid Corpus Manipulation Toolkit.maxpat">Open the Overview Patch</openfilelink></h4>
    <div class="document">
<p>FluidAmpSlice is based on two envelop followers on a highpassed version of the signal: one slow that gives the trend, and one fast. Each have features that will interact. The example code below is unfolding the various possibilites in order of complexity.</p>
<p>The process will return an audio steam with sample-long impulses at estimated starting points of the different slices.</p>
</div>


		fluid.ampslice~ is part of the Fluid Decomposition Toolkit of the FluCoMa project. For more explanations, learning material, and discussions on its musicianly uses, visit <a href="http://www.flucoma.org/">flucoma.org</a>.

  </discussion>
	<!--METADATA-->
	<metadatalist>
		<metadata name='author'>FluCoMa</metadata>
		<metadata name='tag'>Fluid Decomposition</metadata>
		<metadata name='tag'>corpus</metadata>
	</metadatalist>
	<!--ARGUMENTS-->
	<objarglist><!-- <objarg name='function' optional='1' type='number'>
			<digest>Initial easing function to use</digest>
			<description>Initial easing function to use. </description>
		</objarg>-->
	</objarglist>
	<!--MESSAGES-->
  <methodlist><method name="reset">
      <arglist />
      <digest>
        Return the object to its original state
      </digest>
      <description>
        Calling <m>reset</m> will change parameter values back to those the object was <i>created</i> with, i.e. any attribute values set in the box will be retained
      </description>
    </method></methodlist>
	<!--ATTRIBUTES-->
	<attributelist><attribute name='fastrampdown' get='1' set='1' type='int' size='1'>
        <digest>
          Fast Envelope Ramp Down Length
        </digest>
        <description>
          <div class="document">
<p>The number of samples the relative envelope follower will take to reach the next value when falling. Typically, this will be faster than slowRampDown.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 1</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='1' /></attributelist></attribute><attribute name='fastrampup' get='1' set='1' type='int' size='1'>
        <digest>
          Fast Envelope Ramp Up Length
        </digest>
        <description>
          <div class="document">
<p>The number of samples the relative envelope follower will take to reach the next value when raising. Typically, this will be faster than slowRampUp.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 1</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='1' /></attributelist></attribute><attribute name='floor' get='1' set='1' type='float64' size='1'>
        <digest>
          Floor value (dB)
        </digest>
        <description>
          <div class="document">
<blockquote>
The level in dB the slowRamp needs to be above to consider a detected difference valid, allowing to ignore the slices in the noise floor.</blockquote>
</div>

          <h5>Constraints</h5><ul><li>Minimum: -144</li><li>Maximum: 144</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='-145.0' /></attributelist></attribute><attribute name='highpassfreq' get='1' set='1' type='float64' size='1'>
        <digest>
          High-Pass Filter Cutoff
        </digest>
        <description>
          <div class="document">
<p>The frequency of the fourth-order Linkwitz–Riley high-pass filter (<a class="reference external" href="https://en.wikipedia.org/wiki/Linkwitz%E2%80%93Riley_filter">https://en.wikipedia.org/wiki/Linkwitz%E2%80%93Riley_filter</a>). This is done first on the signal to minimise low frequency intermodulation with very fast ramp lengths. A frequency of 0 bypasses the filter.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 0</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='85.0' /></attributelist></attribute><attribute name='minslicelength' get='1' set='1' type='int' size='1'>
        <digest>
          Minimum Length of Slice
        </digest>
        <description>
          <div class="document">
<p>The length in samples that the Slice will stay ON. Changes of states during that period will be ignored.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 0</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='2' /></attributelist></attribute><attribute name='offthreshold' get='1' set='1' type='float64' size='1'>
        <digest>
          Off Threshold (dB)
        </digest>
        <description>
          <div class="document">
<p>The threshold in dB of the relative envelope follower to reset, aka to allow the differential envelop to trigger again.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: -144</li><li>Maximum: 144</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='-144.0' /></attributelist></attribute><attribute name='onthreshold' get='1' set='1' type='float64' size='1'>
        <digest>
          On Threshold (dB)
        </digest>
        <description>
          <div class="document">
<p>The threshold in dB of the relative envelope follower to trigger an onset, aka to go ON when in OFF state. It is computed on the difference between the two envelope followers.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: -144</li><li>Maximum: 144</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='144.0' /></attributelist></attribute><attribute name='slowrampdown' get='1' set='1' type='int' size='1'>
        <digest>
          Slow Envelope Ramp Down Length
        </digest>
        <description>
          <div class="document">
<p>The number of samples the absolute envelope follower will take to reach the next value when falling.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 1</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='100' /></attributelist></attribute><attribute name='slowrampup' get='1' set='1' type='int' size='1'>
        <digest>
          Slow Envelope Ramp Up Length
        </digest>
        <description>
          <div class="document">
<p>The number of samples the absolute envelope follower will take to reach the next value when raising.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 1</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='100' /></attributelist></attribute><attribute name='warnings' get='1' set='1' type='int' size='1'>
        <digest>
          Warnings
        </digest>
        <description>
          <div class="document">
<p>Enable warnings to be issued whenever a parameter value is constrained (e.g. clipped)</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 0</li><li>Maximum: 1</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='0' /></attributelist></attribute></attributelist>
	<!--RELATED-->
	<seealsolist>
    
    <seealso name='fluid.bufampslice~' />
    <seealso name='fluid.ampgate~' />
    <seealso name='fluid.onsetslice~' />
    <seealso name='fluid.noveltyslice~' />
    <seealso name='fluid.transientslice~' />
	</seealsolist>
</c74object>