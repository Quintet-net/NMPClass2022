<?xml version='1.0' encoding='utf-8' standalone='yes'?>
<?xml-stylesheet href="./_c74_ref.xsl" type="text/xsl"?>
<!--
Part of the Fluid Corpus Manipulation Project (http://www.flucoma.org/)
Copyright 2017-2019 University of Huddersfield.
Licensed under the BSD-3 License.
See license.md file in the project root for full license information.
This project has received funding from the European Research Council (ERC)
under the European Unionâ€™s Horizon 2020 research and innovation programme
(grant agreement No 725899).
-->
<!-- DO NOT EDIT THIS FILE ... YOU WILL LOSE YOUR WORK -->
<c74object name='fluid.sines~' category='FluidCorpusManuipulation'>
	<digest>Sinusoidal Modelling and Resynthesis</digest>
	<description><div class="document">
<p>Sinusoidal Modelling process on its audio input.</p>
</div>
</description>
  <discussion>
      <h4><openfilelink filename="Fluid Corpus Manipulation Toolkit.maxpat">Open the Overview Patch</openfilelink></h4>
    <div class="document">
<p>It implements a mix of algorithms taken from classic papers.</p>
<blockquote>
<dl class="docutils">
<dt>The algorithm will take an audio in, and will divide it in two parts:</dt>
<dd><ul class="first last simple">
<li>a reconstruction of what it detects as sinusoidal;</li>
<li>a residual derived from the previous signal to allow null-summing</li>
</ul>
</dd>
</dl>
<p>The whole process is based on the assumption that signal is made of pitched steady components that have a long-enough duration and are periodic enough to be perceived as such, that can be tracked, resynthesised and removed from the original, leaving behind what is considered as non-pitched, noisy, and/or transient. It first tracks the peaks, then checks if they are the continuation of a peak in previous spectral frames, by assigning them a track.</p>
</blockquote>
</div>


		fluid.sines~ is part of the Fluid Decomposition Toolkit of the FluCoMa project. For more explanations, learning material, and discussions on its musicianly uses, visit <a href="http://www.flucoma.org/">flucoma.org</a>.

  </discussion>
	<!--METADATA-->
	<metadatalist>
		<metadata name='author'>FluCoMa</metadata>
		<metadata name='tag'>Fluid Decomposition</metadata>
		<metadata name='tag'>corpus</metadata>
	</metadatalist>
	<!--ARGUMENTS-->
	<objarglist><objarg name='maxfftsize' optional='1' type='number'>
        <digest>
          Maxiumm FFT Size
        </digest>
        <description>
          <div class="document">
<p>How large can the FFT be, by allocating memory at instantiation time. This cannot be modulated.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 4</li><li>Snaps to powers of two</li></ul>
        </description><attributelist>
          <attribute name="default" get="1" set="1" type="int" size='1' value='16384' />
        </attributelist></objarg><!-- <objarg name='function' optional='1' type='number'>
			<digest>Initial easing function to use</digest>
			<description>Initial easing function to use. </description>
		</objarg>-->
	</objarglist>
	<!--MESSAGES-->
  <methodlist><method name="reset">
      <arglist />
      <digest>
        Return the object to its original state
      </digest>
      <description>
        Calling <m>reset</m> will change parameter values back to those the object was <i>created</i> with, i.e. any attribute values set in the box will be retained
      </description>
    </method></methodlist>
	<!--ATTRIBUTES-->
	<attributelist><attribute name='bandwidth' get='1' set='1' type='int' size='1'>
        <digest>
          Bandwidth
        </digest>
        <description>
          <div class="document">
<p>The number of bins used to resynthesises a peak. It has an effect on CPU cost: the widest is more accurate but more computationally expensive. It is capped at (fftSize / 2) + 1.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 1</li><li>Maximum: <m>(fftSize/2) + 1</m>(see <at>fftsettings</at>)</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='76' /></attributelist></attribute><attribute name='birthhighthreshold' get='1' set='1' type='float64' size='1'>
        <digest>
          Track Birth High Frequency Threshold
        </digest>
        <description>
          <div class="document">
<p>The threshold in dB above which to consider a peak to start a sinusoidal component tracking, for the high end of the spectrum. It is interpolated across the spectrum until birthLowThreshold at DC.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: -144</li><li>Maximum: 0</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='-60.0' /></attributelist></attribute><attribute name='birthlowthreshold' get='1' set='1' type='float64' size='1'>
        <digest>
          Track Birth Low Frequency Threshold
        </digest>
        <description>
          <div class="document">
<p>The threshold in dB above which to consider a peak to start a sinusoidal component tracking, for the low end of the spectrum. It is interpolated across the spectrum until birthHighThreshold at half-Nyquist.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: -144</li><li>Maximum: 0</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='-24.0' /></attributelist></attribute><attribute name='detectionthreshold' get='1' set='1' type='float64' size='1'>
        <digest>
          Peak Detection Threshold
        </digest>
        <description>
          <div class="document">
<p>The threshold in dB above which a magnitude peak is considered to be a sinusoidal component.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: -144</li><li>Maximum: 0</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='-96.0' /></attributelist></attribute><attribute name='fftsettings' get='1' set='1' type='int' size='3'>
        <digest>
          FFT Settings
        </digest>
        <description>
          <div class="document">
<p>FFT settings consist of three numbers representing the window size, hop size and FFT size in samples:</p>
<p>The hop size and fft size can both be set to -1 (and are by default), with slightly different meanings:</p>
<ul class="simple">
<li>For the hop size, -1 = <tt class="docutils literal">windowSize/2</tt></li>
<li>For the FFT size, -1 = <tt class="docutils literal">windowSize</tt> snapped to the nearest equal / greater power of 2 (e.g. <tt class="docutils literal">windowSize 1024</tt> =&gt; <tt class="docutils literal">fftSize 1024</tt>, but <tt class="docutils literal">windowsSize 1000</tt> also =&gt; <tt class="docutils literal">fftSize 1024</tt>)</li>
</ul>
</div>

          <h5>Constraints</h5><ul><li> FFTSize, if != -1, will set to the next greatest power of two &gt; 4</li><li>The maximum manual FFT size is limited to the value of the <at>maxfftsize</at> initialization argument</li><li>if FFT size != -1, then window size is clipped at FFT size</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='3' value='[[&#39;winSize&#39;, 1024], [&#39;hopSize&#39;, -1], [&#39;fftSize&#39;, -1]]' /></attributelist></attribute><attribute name='mintracklen' get='1' set='1' type='int' size='1'>
        <digest>
          Minimum Track Length
        </digest>
        <description>
          <div class="document">
<p>The minimum duration, in spectral frames, for a sinusoidal track to be accepted as a partial. It allows to remove bubbly pitchy artefactss, but is more CPU intensive and might reject quick pitch material.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 1</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='15' /></attributelist></attribute><attribute name='trackfreqrange' get='1' set='1' type='float64' size='1'>
        <digest>
          Tracking Frequency Range (Hz)
        </digest>
        <description>
          <div class="document">
<p>The frequency difference allowed for a track to diverge between frames, in Hertz.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 1.0</li><li>Maximum: 10000.0</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='50.0' /></attributelist></attribute><attribute name='trackingmethod' get='1' set='1' type='int' size='1'>
        <digest>
          Tracking Method
        </digest>
        <description>
          <div class="document">
<p>The algorithm used to track the sinusoidal continuity between spectral frames. 0 is the default, &quot;Greedy&quot;, and 1 is a more expensive [^&quot;Hungarian&quot;]( Neri, J., and Depalle, P., &quot;Fast Partial Tracking of Audio with Real-Time Capability through Linear Programming&quot;. Proceedings of DAFx-2018. ) one.</p>
</div>

          
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='0' /></attributelist></attribute><attribute name='trackmagrange' get='1' set='1' type='float64' size='1'>
        <digest>
          Tracking Magnitude Range (dB)
        </digest>
        <description>
          <div class="document">
<p>The amplitude difference allowed for a track to diverge between frames, in dB.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 1.0</li><li>Maximum: 200.0</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='15.0' /></attributelist></attribute><attribute name='trackprob' get='1' set='1' type='float64' size='1'>
        <digest>
          Tracking Matching Probability
        </digest>
        <description>
          <div class="document">
<p>The probability of the tracking algorithm to find a track.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 0.0</li><li>Maximum: 1.0</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='0.5' /></attributelist></attribute><attribute name='warnings' get='1' set='1' type='int' size='1'>
        <digest>
          Warnings
        </digest>
        <description>
          <div class="document">
<p>Enable warnings to be issued whenever a parameter value is constrained (e.g. clipped)</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 0</li><li>Maximum: 1</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='0' /></attributelist></attribute></attributelist>
	<!--RELATED-->
	<seealsolist>
    
    <seealso name='fluid.bufsines~' />
    <seealso name='fluid.transients~' />
    <seealso name='fluid.hpss~' />
	</seealsolist>
</c74object>