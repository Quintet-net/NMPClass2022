<?xml version='1.0' encoding='utf-8' standalone='yes'?>
<?xml-stylesheet href="./_c74_ref.xsl" type="text/xsl"?>
<!--
Part of the Fluid Corpus Manipulation Project (http://www.flucoma.org/)
Copyright 2017-2019 University of Huddersfield.
Licensed under the BSD-3 License.
See license.md file in the project root for full license information.
This project has received funding from the European Research Council (ERC)
under the European Unionâ€™s Horizon 2020 research and innovation programme
(grant agreement No 725899).
-->
<!-- DO NOT EDIT THIS FILE ... YOU WILL LOSE YOUR WORK -->
<c74object name='fluid.ampgate~' category='FluidCorpusManuipulation'>
	<digest>Amplitude-based Gating Slicer</digest>
	<description><div class="document">
<p>This class implements an amplitude-based slicer, with various customisable options and conditions to detect absolute amplitude changes as onsets and offsets.</p>
</div>
</description>
  <discussion>
      <h4><openfilelink filename="Fluid Corpus Manipulation Toolkit.maxpat">Open the Overview Patch</openfilelink></h4>
    <div class="document">
<p>FluidAmpSlice is based on an envelop follower on a highpassed version of the signal, which is then going through a Schmidt trigger and state-aware time contraints. The example code below is unfolding the various possibilites in order of complexity.</p>
<p>The process will return an audio steam with square envelopes around detected slices the different slices, where 1s means in slice and 0s mean in silence.</p>
</div>


		fluid.ampgate~ is part of the Fluid Decomposition Toolkit of the FluCoMa project. For more explanations, learning material, and discussions on its musicianly uses, visit <a href="http://www.flucoma.org/">flucoma.org</a>.

  </discussion>
	<!--METADATA-->
	<metadatalist>
		<metadata name='author'>FluCoMa</metadata>
		<metadata name='tag'>Fluid Decomposition</metadata>
		<metadata name='tag'>corpus</metadata>
	</metadatalist>
	<!--ARGUMENTS-->
	<objarglist><objarg name='maxsize' optional='1' type='number'>
        <digest>
          Maximum Total Latency
        </digest>
        <description>
          <div class="document">
<p>How large can the buffer be for time-critical conditions, by allocating memory at instantiation time. This cannot be modulated.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 1</li></ul>
        </description><attributelist>
          <attribute name="default" get="1" set="1" type="int" size='1' value='88200' />
        </attributelist></objarg><!-- <objarg name='function' optional='1' type='number'>
			<digest>Initial easing function to use</digest>
			<description>Initial easing function to use. </description>
		</objarg>-->
	</objarglist>
	<!--MESSAGES-->
  <methodlist><method name="reset">
      <arglist />
      <digest>
        Return the object to its original state
      </digest>
      <description>
        Calling <m>reset</m> will change parameter values back to those the object was <i>created</i> with, i.e. any attribute values set in the box will be retained
      </description>
    </method></methodlist>
	<!--ATTRIBUTES-->
	<attributelist><attribute name='highpassfreq' get='1' set='1' type='float64' size='1'>
        <digest>
          High-Pass Filter Cutoff
        </digest>
        <description>
          <div class="document">
<p>The frequency of the fourth-order Linkwitz-Riley high-pass filter (<a class="reference external" href="https://en.wikipedia.org/wiki/Linkwitz%E2%80%93Riley_filter">https://en.wikipedia.org/wiki/Linkwitz%E2%80%93Riley_filter</a>). This is done first on the signal to minimise low frequency intermodulation with very fast ramp lengths. A frequency of 0 bypasses the filter.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 0</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='85.0' /></attributelist></attribute><attribute name='lookahead' get='1' set='1' type='int' size='1'>
        <digest>
          Forward Lookup Length
        </digest>
        <description>
          <div class="document">
<p>The length of the buffer kept after an offset to allow the algorithm, once the Slice is considered finished, to wait further in time (up to that many samples) to find a minimum amplitude as the Slice offset point. This affects the latency of the algorithm.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 0</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='0' /></attributelist></attribute><attribute name='lookback' get='1' set='1' type='int' size='1'>
        <digest>
          Backward Lookup Length
        </digest>
        <description>
          <div class="document">
<p>The length of the buffer kept before an onset to allow the algorithm, once a new Slice is detected, to go back in time (up to that many samples) to find the minimum amplitude as the Slice onset point. This affects the latency of the algorithm.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 0</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='0' /></attributelist></attribute><attribute name='minlengthabove' get='1' set='1' type='int' size='1'>
        <digest>
          Required Minimum Length Above Threshold
        </digest>
        <description>
          <div class="document">
<p>The length in samples that the envelope have to be above the threshold to consider it a valid transition to ON. The Slice will start at the first sample when the condition is met. Therefore, this affects the latency.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 1</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='1' /></attributelist></attribute><attribute name='minlengthbelow' get='1' set='1' type='int' size='1'>
        <digest>
          Required Minimum Length Below Threshold
        </digest>
        <description>
          <div class="document">
<p>The length in samples that the envelope have to be below the threshold to consider it a valid transition to OFF. The Slice will end at the first sample when the condition is met. Therefore, this affects the latency.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 1</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='1' /></attributelist></attribute><attribute name='minsilencelength' get='1' set='1' type='int' size='1'>
        <digest>
          Minimum Length of Silence
        </digest>
        <description>
          <div class="document">
<p>The length in samples that the Slice will stay OFF. Changes of states during that period will be ignored.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 1</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='1' /></attributelist></attribute><attribute name='minslicelength' get='1' set='1' type='int' size='1'>
        <digest>
          Minimum Length of Slice
        </digest>
        <description>
          <div class="document">
<p>The length in samples that the Slice will stay ON. Changes of states during that period will be ignored.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 1</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='1' /></attributelist></attribute><attribute name='offthreshold' get='1' set='1' type='float64' size='1'>
        <digest>
          Off Threshold
        </digest>
        <description>
          <div class="document">
<p>The threshold in dB of the envelope follower to trigger an offset, , aka to go ON when in OFF state.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: -144</li><li>Maximum: 144</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='-90.0' /></attributelist></attribute><attribute name='onthreshold' get='1' set='1' type='float64' size='1'>
        <digest>
          On Threshold
        </digest>
        <description>
          <div class="document">
<p>The threshold in dB of the envelope follower to trigger an onset, aka to go ON when in OFF state.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: -144</li><li>Maximum: 144</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='-90.0' /></attributelist></attribute><attribute name='rampdown' get='1' set='1' type='int' size='1'>
        <digest>
          Ramp Down Length
        </digest>
        <description>
          <div class="document">
<p>The number of samples the envelope follower will take to reach the next value when falling.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 1</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='10' /></attributelist></attribute><attribute name='rampup' get='1' set='1' type='int' size='1'>
        <digest>
          Ramp Up Length
        </digest>
        <description>
          <div class="document">
<p>The number of samples the envelope follower will take to reach the next value when rising.</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 1</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='10' /></attributelist></attribute><attribute name='warnings' get='1' set='1' type='int' size='1'>
        <digest>
          Warnings
        </digest>
        <description>
          <div class="document">
<p>Enable warnings to be issued whenever a parameter value is constrained (e.g. clipped)</p>
</div>

          <h5>Constraints</h5><ul><li>Minimum: 0</li><li>Maximum: 1</li></ul>
        </description><attributelist><attribute name="default" get="1" set="1" type="int" size='1' value='0' /></attributelist></attribute></attributelist>
	<!--RELATED-->
	<seealsolist>
    
    <seealso name='fluid.bufampgate~' />
    <seealso name='fluid.ampslice~' />
    <seealso name='fluid.onsetslice~' />
    <seealso name='fluid.noveltyslice~' />
    <seealso name='fluid.transientslice~' />
	</seealsolist>
</c74object>